!function(t){"use strict";function e(){t(document).off("click",".rtwpvg-add-image"),t(document).on("click",".rtwpvg-add-image",i),t(document).on("click",".rtwpvg-remove-image",a),t(".woocommerce_variation").each(function(){var e=t(this).find(".options");t(this).find(".rtwpvg-gallery-wrapper").insertBefore(e)})}function i(e){e.preventDefault(),e.stopPropagation();var i=this,a=void 0,r=t(this).data("product_variation_id");if("undefined"!=typeof wp&&wp.media&&wp.media.editor){if(a)return void a.open();(a=wp.media.frames.select_image=wp.media({title:rtwpvg_admin.choose_image,button:{text:rtwpvg_admin.add_image},library:{type:["image"]},multiple:!0})).on("select",function(){var e=a.state().get("selection").toJSON().map(function(t){if("image"===t.type){var e=t.id,i=t.sizes,a=(i=void 0===i?{}:i).thumbnail,o=i.full,n=a?a.url:o.url;return wp.template("rtwpvg-image")({id:e,url:n,product_variation_id:r})}}).join("");t(i).parent().prev().find(".rtwpvg-images").append(e),n(),o(i)}),a.open()}}function a(e){e.preventDefault(),e.stopPropagation();var i=this;o(this),setTimeout(function(){t(i).parent().remove()},1)}function o(e){t(e).closest(".woocommerce_variation").addClass("variation-needs-update"),t("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),t("#variable_product_options").trigger("woocommerce_variations_input_changed")}function n(){t(".rtwpvg-images").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"rtwpvg-sortable-placeholder",start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style")},update:function(){o(this)}})}t("#rtwpvg-settings-wrapper").on("click",".nav-tab",function(e){e.preventDefault();var i=t(this),a=i.data("target");if(i.addClass("nav-tab-active").siblings().removeClass("nav-tab-active"),t("#"+a).show().siblings().hide(),t("#_last_active_tab").val(a),history.pushState){var o=function(t,e){var i=window.location.href,a=location.hash;if((i=i.replace(a,"")).indexOf("?")>=0){var o=i.substring(i.indexOf("?")+1).split("&"),n=!1;o.forEach(function(i,a){var r=i.split("=");r[0]==t&&(o[a]=t+"="+e,n=!0)}),n||o.push(t+"="+e),i=i.substring(0,i.indexOf("?")+1)+o.join("&")}else i+="?"+t+"="+e;return i+a}("section",a);window.history.pushState({path:o},"",o)}}),t("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){e(),n()}),t("#variable_product_options").on("woocommerce_variations_added",function(){e(),n()})}(jQuery);
